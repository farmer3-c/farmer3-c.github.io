---
layout: post
title: "go环境安装"
subtitle: ""
date: 2026-01-28 13:17:03 +0800
author: "farmer3-c"
header-img: "img/post-bg-2015.jpg"
tags: [go]
mathjax: true
---
## Go 计算机编程语言

Go（又称为Golang）是一种由Google开发的开源编程语言，于2009年首次公开发布。它旨在提供简洁、高效、可靠的软件开发解决方案。Go是一种静态强类型、编译型语言，具有很强的表达能力，得益于其并发机制，用它编写的程序能够非常有效地利用多核与联网的计算机。

#### 主要特点

* Go语言的设计目标是将静态语言的安全性和性能与动态语言的易用性相结合。它在语言层面提供了对协程的支持，特别适合编写高并发的项目。以下是Go语言的一些主要特点：

* 简洁、快速、安全：Go语言的语法接近C语言，但更简洁，编译速度非常快，且具有内置的垃圾回收功能。
 
* 并发支持：Go语言内置了轻量级进程（goroutine）、通道和select语句等并发原语，使得编写并发程序变得简单和高效。
 
* 模块化：Go语言采用模块化的方式组织代码，易于维护和重用。
 
* 跨平台：Go语言支持跨平台编译，可以在不同的操作系统上进行开发和部署。

## 安装

在Windows中安装Go:

安装包下载地址为：https://go.dev/dl/。

如果打不开可以使用这个地址：https://golang.google.cn/dl/。

## 运行第一个go程序

```go
package main

import "fmt"

func main() {
	fmt.Println("Hello, World!")
}
```

保存为hello.go

#### 终端运行

```bash
$ go run hello.go
Hello, World!
```

在同一命令提示符窗口中，第一次运行这个程序时，会耗时较多，在我的电脑上大约需要2~3秒，之后再运行这个程序就会很快，但关闭这个窗口，隔一段时间下次运行情况如初。

原因是这个命令会先编译 .go 文件，然后再运行编译后的可执行文件，所以第一次运行会比较慢。

可以使用go build命令来编译程序，然后再运行编译后的可执行文件，这样就不会每次都重新编译了。

```bash
$ go build hello.go
$ ./hello
Hello, World!
```

#### VS Code运行

在VS Code中安装Go插件，然后打开hello.go文件，点击运行按钮，就可以运行这个程序了。

我遇到了几个问题：

###### 1. VS Code 在安装 Go 语言的核心工具（gopls 和 dlv）时，无法连接到官方的 Go 模块代理服务器（proxy.golang.org），导致网络连接超时失败。

报错中有`dial tcp 142.251.45.145:443: connectex: A connection attempt failed`

可以知道：
- 由于网络环境限制，电脑无法访问谷歌的官方 Go 模块代理服务器
- 这是国内使用 Go 开发时非常常见的网络问题，并非代码或软件本身的故障

**解决办法**

需要将 Go 的模块代理切换为国内的镜像源（如七牛云的 goproxy.cn），具体操作步骤如下：

按下 Win + R，输入 sysdm.cpl 并回车，打开系统属性，切换到「高级」标签页，点击「环境变量」

在「用户变量」区域，点击「新建」：
变量名：GOPROXY
变量值：https://goproxy.cn,direct

再新建一个变量（如果不存在）：
变量名：GO111MODULE
变量值：on
点击「确定」保存所有设置

重新安装 Go 工具
完成代理配置后，重启 VS Code，然后按以下步骤重新安装工具：
在 VS Code 中打开任意 .go 文件
右下角会提示「Install Go tools」，点击「Install」
或者按下 Ctrl+Shift+P（Mac 是 Cmd+Shift+P），输入 Go: Install/Update Tools
全选所有工具，点击「确定」开始安装


###### 2. 运行时提示：` "initialization failed: packages.Load error: err: exit status 1: stderr: go: go.mod file not found in current directory or any parent directory"`

从错误信息 go: go.mod file not found in current directory or any parent directory 
可以知道：
* Go 1.11 及以上版本默认启用了模块（Modules） 机制，调试工具（dlv）在编译调试程序时，会要求项目必须是一个合法的 Go 模块（即存在 go.mod 文件）。
* 项目目录没有初始化 Go 模块，所以编译和调试都无法正常进行。

**解决办法**

在项目目录下执行以下命令，初始化 Go 模块：
```bash
go mod init <module_name>
```
其中，<module_name> 是你想要为项目指定的模块名称。

执行完命令后，会在项目目录下生成一个 go.mod 文件，该文件包含了项目的模块信息。

---
**参考**

* [菜鸟教程](https://www.runoob.com/go/go-environment.html)