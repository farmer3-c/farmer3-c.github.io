---
layout: post
title: "网络层"
subtitle: "cw"
date: 2025-08-27 19:48:28 +0800
author: "farmer3-c"
header-img: "img/post-bg-2015.jpg"
tags: [Computer Networks]
---
网络层是两个核心层之一·其功能是将分组从源主机一路送到自的主机，本章围绕这个功能，探讨网络层的技术和协议。

本章首先探讨了源和目的之间的通信网络的分类和提供的服务，数据报网络提供无连接的服务，虚电路网络提供面向连接的服务。

网络层上的协议分为被路由协议（routed protocol）和路由选择协议。被路由协议，为分组的路由提供所需要的信息。IP协议是被路由协议的典型实例，它提供定位所需要的IP地址，也定义了网络层PDU，即分组的格式。

5.2节探讨IPv4地址的表示和5个分类。Pv4地址资源按块分配给ISP，个人用户从ISP获取IP地址。为了方便管理和节约IP地址的使用，按照主机数和子网数自需求对地址进行划分，可变长的子网掩码可以尽量不浪费地址。同时地采用 CIDR，按需分配IPv4地址和缩小路由表的规模。

本章探讨了IP地址的结构特点之后，我们探讨了IP寻址的原理和过程，并与二层的MAC寻址进行了对照。在数据传输的全部过程中，IP寻址和MAC寻址共同发生了作用。

在知晓通信对方的IPv4地址，但却不知其MAC地址时，启用地址解析协议（ARP）；当目的主机位于远程网络中时，必须使用默认网关才能完成与目的主机的通信：因为MAC寻址局限在子网内，所以数据帧头的MAC地址在每跳（路由器）都发生置换。

IP分组的传输仅仅是尽力而为，它会遭遇丢包、拥塞等异常或差错情况，互联网控制消息协议（ICMP）提供了差错消息报告：同时ICMP也提供了主动测试网络的消息。

IPv4总地址池已于2011年枯竭，而网民的人数还在逐年上升，即使不算浪费掉的IPv4地址，43亿的地址总量已经无法满足约55亿全球网民的地址需求了。NAT是地址不够用的快速修补方案，我们探讨了私人地址和NAT的工作原理。

IPv6是大势所趋，5.4节探讨广IPv6地址的冒分十六进制表示和分类。IPv6地址可以通过无状态地址自动配置和动态主机配置协议（DHCPv6）获取，获得的IPv6 地址需要通过重复地址检测（DAD）之后才可以使用，所以，IPv6地址是有不同状态的。IPv6的邻居发现协议提供地址解析功能，取代IPv4的ARP。

在IPv4向IPv6的过渡时期，通现出了三大类过渡技术：双协议栈、隧道技术和NAT-PT。

路由选择协议是网络层的一大类协议（见55节）。按照运行的位置，路由选择协议分为IGP和BGP.本章先介绍IGP中的距离矢量路由协议的基本原理然后探讨早期网络中的路由信息协议（RIP）的工作原理、存在的计数到无穷路由环等问题，以及解决的方法。

链路状态（LS）路由协议的基本原理是发现、设置、构造、分发和计算。开放的最短路径优先（OSPF）是典型的LS路由协议，我们探讨了5种OSPF报文及作用、全毗邻关系的建立、DR/BDR的选举、OSPF路由器状态的迁移等还对OSPF在大型网络中分区域运行的原因和效果进行了探讨。

网络从免费走向商用时，QoS问题就不可回避了。5.6节探讨了三个QoS模型或技术：综合服务模型、区分服务模型和多协议标签交换技术。

---
[0929](/pdf/05-路由选择和网络层-0929.pdf)  
[1014](/pdf/05-路由选择和网络层-1014.pdf)